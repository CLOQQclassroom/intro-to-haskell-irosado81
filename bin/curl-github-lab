#!/bin/sh

# Hack on the GitHub API in a testing environment
# this assumes you have a GITHUB_TOKEN key
#
# lab - [String] The GitHub Lab you are trying to curl to
# path -[String] The API path you want to take
#
# Examples
#   curl-github-lab spider-skull-island /users/atmos

set -e

lab=$1
path=$2
accept=''

if [[ $path =~ ^[^/] ]] ; then path="/$path"; fi

SHA="$(curl https://$lab.github.com/site/sha)"
curl -v --user-agent "curl/$SHA" -H "Authorization: token $GITHUB_TOKEN" https://$lab.github.com/api/v3$path
